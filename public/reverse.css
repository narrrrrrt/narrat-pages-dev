:root { color-scheme: light dark; }
* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; }
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background:#111; color:#eee;
}

.hud {
  display:flex; gap:10px; align-items:center; padding:12px 16px;
  position:sticky; top:0; background:#111; z-index:10;
}
.badge {
  border:1px solid #2c6bc0; color:#a8c7ff; background:#0e1a2b;
  padding:6px 10px; border-radius:10px; font-weight:600;
}
.link { margin-left:auto; color:#a8c7ff; text-decoration:underline; cursor:pointer; }

.stage { display:flex; justify-content:center; padding:16px; }
#board-wrap { position:relative; width:min(92vw, 640px); aspect-ratio:1/1; }
.board {
  position:absolute; inset:0;
  display:grid; grid-template-columns:repeat(8,1fr); grid-template-rows:repeat(8,1fr);
  background:#246b2f; border-radius:8px; padding:8px; gap:6px;
  box-shadow: 0 8px 20px rgba(0,0,0,.35) inset, 0 4px 16px rgba(0,0,0,.25);
}
.cell {
  background:#2f8a3c; border-radius:8px; position:relative; cursor:pointer;
  box-shadow: inset 0 0 0 3px rgba(0,0,0,.35);
}
.cell:active { transform: translateY(1px); }

.stone {
  position:absolute; inset:0; margin:auto; width:70%; height:70%;
  border-radius:50%;
  box-shadow: 0 2px 6px rgba(0,0,0,.5), inset 0 0 0 2px rgba(0,0,0,.35);
}
.stone.black { background:#111; }
.stone.white { background:#f7f7f7; }

.legal {
  position:absolute; inset:0; margin:auto; width:70%; height:70%;
  border-radius:8px; border:3px dashed rgba(255,255,255,.6);
}

/* 星（ドット）…中央4×4の四隅だけ */
.board-stars { position:absolute; inset:0; pointer-events:none; }
.star {
  position:absolute; width:10px; height:10px;
  left:var(--x); top:var(--y); transform:translate(-50%, -50%);
  background:#0a0; border-radius:50%;
  box-shadow: 0 0 0 3px #0a0, 0 0 6px rgba(0,0,0,.6);
  opacity:.8;
}

/* モーダル */
.modal {
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:none; align-items:center; justify-content:center; z-index:50;
}
.modal.show { display:flex; }
.modal-box {
  width:min(92vw, 480px); background:#fff; color:#111;
  border-radius:12px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.5);
}
.modal-actions { display:flex; justify-content:flex-end; margin-top:16px; }
.btn {
  padding:8px 16px; border-radius:10px; border:1px solid #2c6bc0;
  background:#eef3ff; color:#16396c; font-weight:700; cursor:pointer;
}
.btn:active { transform: translateY(1px); }

/* 小さめデバイス調整 */
@media (max-width:480px){
  .hud{ flex-wrap:wrap; gap:8px; }
  .badge{ font-size:.9rem; }
  .star{ width:8px; height:8px; }
}